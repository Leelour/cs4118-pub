<!DOCTYPE html>
<!--[if IE 9]><html class="lt-ie10" lang="en" > <![endif]-->
<html class="no-js" lang="en">

<head>
    <!-- These tags are the foundation boilerplate. What is and isn't
          necessary is still unknown -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>W4118: VM Setup</title>

    <link rel="stylesheet" href="css/normalize.css">
    <link rel="stylesheet" href="css/foundation.css">
    <link href='http://fonts.googleapis.com/css?family=Noto+Sans'
        rel='stylesheet' type='text/css'>

    <script src="js/vendor/custom.modernizr.js"></script>

    <style>
        /* The class for pseudo-headers above section headers to help
           magellan move to the proper position */
        .marker {
            visibility: hidden;
            font-size: 10%;
        }
        #title {
            position: relative;
            font-size: 175%;
            top: 30px;
        }
        h5 {
            font-size: 133%;
        }
        p {
            font-family: 'Noto Sans', sans-serif;
        }
        i {
            font-size: 90%;
        }
        ul {
            font-family: 'Noto Sans', sans-serif;
            padding-left: 10px;
        }
        /* This div contains the entire page and applies an easthetically
           pleasing offset to the text inside */
        #container {
            padding: 10px;
        }
    </style>
</head>
<body>
    <!-- This is the menu that stays at the top of the screen. To add more
          sections to it... -->
    <div data-magellan-expedition="fixed" class="smooth"
        style="position:fixed;top:0">
        <dl class="sub-nav">
            <!-- Copy a dd element like the one below. The name of the
                 data-magellan-arrival attribute and the href attribute of the
                 a tag should be unique and match (the href should be
                 preceeded by a '#'). The text of the a tag does not matter.
                 -->
            <dd data-magellan-arrival="preface" class="active"><a
            href="#preface">Preface</a></dd>
            <dd data-magellan-arrival="step1"><a href="#step1">Step 1</a></dd>
            <dd data-magellan-arrival="step2"><a href="#step2">Step 2</a></dd>
            <dd data-magellan-arrival="step3"><a href="#step3">Step 3</a></dd>
            <dd data-magellan-arrival="step4"><a href="#step4">Step 4</a></dd>
        </dl>
    </div>

    <!-- The page content (surrounded by a div just for the padding) -->
    <div id="container">
        <h3 id="title">Setting up an Arch Linux (x64) Virtual Machine in
            VirtualBox</h3>

        <br />

        <!-- A marker combo. The actual position that each link scrolls to is
             the first h5 tag, as specified by the data-magellan-destination
             and id attribute. The two names should match. With the marker
             class, it's visibility is hidden, but still takes up space on the
             page. The second h5 tag is the actual title of the section. To
             make your own section, simply copy those two headers (or just) the
             first, and change the data-magellan-destination and id attribute
             to match whatever new section you made. -->
        <h5 data-magellan-destination="preface" id="preface"
            class="marker">A</h5>
        <!-- Whatever you want in this section here -->
        <hr>
        <h5>Preface</h5>
        <p>
            <a href="http://www.archlinux.org/">Arch Linux</a> is a distribution
            of GNU/Linux with a philosophy that emphasizes simplicity and user
            control. However, this means that users themselves must put in an
            effort to shape their Arch installation as they see fit. Thankfully,
            <a href="http://wiki.archlinux.org/index.php/Main_Page">Arch
            Linux</a> has a large community supporting it and tons of guides
            to help walk you through even the obscure features of the
            distribution. This guide will point you to Arch guides detailing
            how to setup your system and detail any modifications necessary
            to get it to work on VirtualBox.
        </p>
        <p>
            <i>We recommend you use a virtual machine manager for this class,
            instead of developing directly on your machine. If you use your
            own machine, you may risk data loss/corruption in some assignments
            of this course.</i>
        </p>

        <h5 data-magellan-destination="step1" id="step1" class="marker">A</h5>
        <hr>
        <h5>Step 1: Setting up a Virtual Machine</h5>
        <p>
            First, you should download and install <a
            href="https://www.virtualbox.org/wiki/Downloads">VirtualBox</a>. 
			If you use Linux, your distribution likely already has 
			packages in its repositories for VirtualBox. You can refer to 
			the <a href="https://www.virtualbox.org/manual/UserManual.html
			">User Manual</a> on the download page for instructions on 
			installing VirtualBox, though the process is similar to any 
			other software.
        </p>
        <p>
            Then, grab the <a href="https://www.archlinux.org/download/">Arch
            Linux ISO</a>. To begin the installation process, start VirtualBox 
			and create a new virtual machine. If you haven't already created 
			one, it will prompt you with the configuration wizard. Otherwise, 
			just click the "New" button in the top bar. The new window will 
			walk you through configuring the virutal hardware and selecting 
			the ISO. For the hardware, we suggest:
        </p>
        <ul>
            <li>20 GB (dynamic, single file) minimum, 50 GB or more is 
				recommended (Please note that this is the maximum size the 
				virtual disk will grow to; you do not need to have this much 
				free space immediately available)</li>
            <li>1 GB minimum, 2 GB recommend (or more, if you have 8 GB or 
				more of physical RAM)</li>
            <li>At least 2 cores</li>
        </ul>
        <p>
            Once you've booted into the Arch Live CD, proceed to Step 2.
        </p>

        <h5 data-magellan-destination="step2" id="step2" class="marker">A</h5>
        <hr>
        <h5>Step 2: Installing Arch Linux</h5>
        <p>
            Now you're ready to install Arch Linux. Arch recently abandoned
            its <code>ncurses</code> based installation (circa 2012);
            installation is done entirely by a series of commands. The <a
            href="https://wiki.archlinux.org/index.php/Beginners'_Guide">
			Beginner's Guide</a> walks you through the entire process, so 
			follow those steps, but here are some suggestions/modifications:
        </p>
        <ul>
            <li>Since our networking hardware is fixed, DHCP is all
                we need.</li>
            <li>Make 2 partitions: one <code>ext4</code> partition and
                one <code>swap</code> partition. The <code>ext4</code> 
				partition is where you'll be doing most of the work, so 
				make it large. The <code>swap</code> partiion might need 
				to be large, depending on how much RAM you allocated your 
				VM. 4 GB should be enough. The swap partition, as the 
				name implies, is used to swap memory pages between RAM 
				and disk, usually just when physical memory is running low.
            <li>You should install the following package (groups): <code>
				base, base-devel, linux-lts, linux-lts-headers</code>. 
				Although we will be using the LTS kernel, the <code>linux
				</code> package is necessary, as the VirtualBox modules we 
				will be installing later depend on it.</li>
        </ul>
        <p>
            We suggest making another user, so you don't always log in as
            root. Additionally, you may want a graphical interface; however,
            you might want to setup guest additions first (the next step).
        </p>

        <h5 data-magellan-destination="step3" id="step3" class="marker">A</h5>
        <hr>
        <h5>Step 3: Installing VirtualBox Guest Additions</h5>

        <p>
            You should get acquainted with <code>pacman</code>, Arch's package
            management system before proceeding.
        </p>
        <p>
            While ArchLinux is fully functional, you might want to install 
			the <a href="https://www.virtualbox.org/manual/ch04.html">
			VirtualBox Guest Additions</a> for (incredibly useful) 
			features like automatic screen resizing, shared clipboard, 
			seamless guest mode, and more. You should not install the 
			VirtualBox Guest Additions using the CD that comes with 
			VirtualBox, as the installation will fail. Rather, you should 
			follow the instructions on the Arch Wiki <a href="
			https://wiki.archlinux.org/index.php/VirtualBox#Installation_st
			eps_for_Arch_Linux_guests">VirtualBox</a> page. Since we'll 
			be compiling our own kernels, you should follow the custom 
			kernel instructions. For clarity, the first two steps are 
			given below:
        </p>
		<ul>
			<li>Install <code>virtualbox-guest-utils, 
				virtualbox-guest-modules, virtualbox-guest-dkms</code> and 
				<code>vboxguest-hook</code>. <code>vboxguest-hook</code> is 
				from the <a href="
				https://wiki.archlinux.org/index.php/Arch_User_Repository#Insta
				lling_packages">Arch User Repository</a>, so follow that 
				guide for installing it (<code>yaourt</code> is recommended 
				for simplicity). <code>vboxguest-hook</code> enables 
				automatic compilation of VirtualBox modules at kernel image 
				generation and boot time.</li>
			<li>Run <code>dkms install</code> to install the kernel modules. 
				You can figure out the kernel version by <code>uname -r</code>
				, or looking at the names of the directories under <code>
				/usr/src</code> if you haven't reboot into the Arch install 
				yet. You can get the <code>vboxguest</code> version directly 
				from <code> ls /var/lib/dkms/vboxguest</code> (the name of 
				the folder is the same as the version number).</li>
		</ul>
		<p>
			Follow the rest of the guide to learn how to enable automatically 
			loading and updating of the modules, add <code>vboxguest</code> to 
			the <code> HOOKS</code> array, and launch the guest services. The 
			guide also has instructions for many other features you may be 
			interested in.
		</p>
        
        <h5 data-magellan-destination="step4" id="step4" class="marker">A</h5>
        <hr>
        <h5>Step 4: Make it Your Own</h5>
        
        <p>
            There's no more necessary setup to do. Feel free to 
			install/customize any packages you want. The Beginner's Guide 
			links to some <a href="
			https://wiki.archlinux.org/index.php/General_Recommendations">
			General Recommendations</a> and a <a href="
			https://wiki.archlinux.org/index.php/List_of_Applications">
			List of Applications</a> at the end; those may be of interest 
			to you. You can keep your Arch install small and lean, or 
			turn it into a multimedia powerhouse.
        </p>
    </div>

    <!-- Some more boilerplate tags -->
    <script src="js/vendor/jquery.js"></script>
    <script src="js/jquery.smooth-scroll.js"></script>
    <script src="js/foundation.min.js"></script>
    <!-- "Include" the js for the magellan menu -->
    <script src="js/foundation/foundation.magellan.js"></script>
    <script>
        /* Load foundation, and tell it we're also loading magellan */
        $(document).foundation('magellan');
        /* a tags enclosed in some other tag of class smooth will be scrolled
           using a smooth effect the scroll will end 6 units (not exactly
           pixels, it seems) above their destination. */
        $('.smooth a').smoothScroll({offset:-18});
    </script>
</body>
</html>

